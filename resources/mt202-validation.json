{
  "messageType": "MT202",
  "rules": [
    /* ===== Block 4 mandatory presence ===== */

    {
      "type": "required",
      "mtKey": "b4.20",
      "message": "Field 20 (Transaction Reference Number) is mandatory"
    },
    {
      "type": "required",
      "mtKey": "b4.32A.date",
      "message": "Field 32A date is mandatory"
    },
    {
      "type": "required",
      "mtKey": "b4.32A.ccy",
      "message": "Field 32A currency is mandatory"
    },
    {
      "type": "required",
      "mtKey": "b4.32A.amount",
      "message": "Field 32A amount is mandatory"
    },

    /* ===== Length rules ===== */

    {
      "type": "length",
      "mtKey": "b4.20",
      "min": 1,
      "max": 16
    },
    {
      "type": "length",
      "mtKey": "b4.21",
      "min": 0,
      "max": 16
    },

    /* ===== Format rules (regex) ===== */

    {
      "type": "regex",
      "mtKey": "b4.32A.date",
      "pattern": "^[0-9]{6}$"
    },
    {
      "type": "regex",
      "mtKey": "b4.32A.ccy",
      "pattern": "^[A-Z]{3}$"
    },
    {
      "type": "regex",
      "mtKey": "b4.32A.amount",
      "pattern": "^[0-9]{1,12}([,\\.][0-9]{0,2})?$"
    },

    /* ===== Option sets for FI parties ===== */

    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.52A.bic", "b4.52D.name"],
      "message": "Only one of 52A, 52D (Ordering Institution) may be present"
    },
    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.53A.bic", "b4.53B.name", "b4.53D.name"],
      "message": "Only one of 53A, 53B, 53D (Sender's Correspondent) may be present"
    },
    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.54A.bic", "b4.54B.name", "b4.54D.name"],
      "message": "Only one of 54A, 54B, 54D (Receiver's Correspondent) may be present"
    },
    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.56A.bic", "b4.56B.name", "b4.56D.name"],
      "message": "Only one of 56A, 56B, 56D (Intermediary Institution) may be present"
    },
    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.57A.bic", "b4.57B.name", "b4.57D.name"],
      "message": "Only one of 57A, 57B, 57D (Account With Institution) may be present"
    },
    {
      "type": "atMostOneOf",
      "mtKeys": ["b4.58A.bic", "b4.58D.name"],
      "message": "Only one of 58A, 58D (Beneficiary Institution) may be present"
    },

    /* ===== Conditional rules ===== */

    {
      "type": "conditionalRequired",
      "whenMtKey": "b4.52A.bic",
      "whenPresent": true,
      "mtKey": "b4.53A.bic",
      "message": "If Ordering Institution 52A is used, Sender's Correspondent 53A is recommended"
    },

    /* ===== Numeric comparisons ===== */

    {
      "type": "compare",
      "mtKey": "b4.32A.amount",
      "operator": ">",
      "threshold": "0",
      "message": "32A amount must be greater than zero"
    }
  ]
}
