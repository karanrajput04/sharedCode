{
	"messageType": "MT103",
	"rules": [
		/* ===== Block 4 mandatory presence ===== */
		{
			"type": "required",
			"mtKey": "b4.20",
			"message": "Field 20 (Transaction Reference Number) is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.23B.code",
			"message": "Field 23B (Bank Operation Code) is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.32A.date",
			"message": "Field 32A date is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.32A.ccy",
			"message": "Field 32A currency is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.32A.amount",
			"message": "Field 32A amount is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.59.name",
			"message": "Field 59 (Beneficiary Customer) is mandatory"
		},
		{
			"type": "required",
			"mtKey": "b4.71A.code",
			"message": "Field 71A (Details of Charges) is mandatory"
		},
		/* ===== Length rules ===== */
		{
			"type": "length",
			"mtKey": "b4.20",
			"min": 1,
			"max": 16
		},
		{
			"type": "length",
			"mtKey": "b4.21",
			"min": 0,
			"max": 16
		},
		{
			"type": "length",
			"mtKey": "b4.23B.code",
			"min": 4,
			"max": 4
		},
		{
			"type": "length",
			"mtKey": "b4.23E.instructionCode",
			"min": 4,
			"max": 4
		},
		{
			"type": "length",
			"mtKey": "b4.71A.code",
			"min": 3,
			"max": 3
		},
		/* ===== Format rules (regex) ===== */
		{
			"type": "regex",
			"mtKey": "b4.32A.date",
			"pattern": "^[0-9]{6}$"
		},
		{
			"type": "regex",
			"mtKey": "b4.32A.ccy",
			"pattern": "^[A-Z]{3}$"
		},
		{
			"type": "regex",
			"mtKey": "b4.32A.amount",
			"pattern": "^[0-9]{1,12}([,\\.][0-9]{0,2})?$"
		},
		{
			"type": "regex",
			"mtKey": "b4.33B.ccy",
			"pattern": "^[A-Z]{3}$"
		},
		{
			"type": "regex",
			"mtKey": "b4.33B.amount",
			"pattern": "^[0-9]{1,12}([,\\.][0-2][0-9])?$"
		},
		{
			"type": "regex",
			"mtKey": "b4.71F.amount",
			"pattern": "^[0-9]{1,12}([,\\.][0-2][0-9])?$"
		},
		{
			"type": "regex",
			"mtKey": "b4.71G.amount",
			"pattern": "^[0-9]{1,12}([,\\.][0-2][0-9])?$"
		},
		/* ===== Value domain rules ===== */
		{
			"type": "allowedValues",
			"mtKey": "b4.23B.code",
			"values": [
				"CRED",
				"SPAY",
				"SSTD"
			],
			"message": "23B must be one of CRED, SPAY, SSTD"
		},
		{
			"type": "allowedValues",
			"mtKey": "b4.71A.code",
			"values": [
				"SHA",
				"OUR",
				"BEN"
			],
			"message": "71A must be one of SHA, OUR, BEN"
		},
		/* ===== Option sets (exactly/at most one of group) ===== */
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.50A.bic",
				"b4.50F.name",
				"b4.50K.name"
			],
			"message": "Only one of 50A, 50F, 50K may be present"
		},
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.52A.bic",
				"b4.52D.name"
			],
			"message": "Only one of 52A, 52D may be present"
		},
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.53A.bic",
				"b4.53B.name",
				"b4.53D.name"
			],
			"message": "Only one of 53A, 53B, 53D may be present"
		},
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.54A.bic",
				"b4.54B.name",
				"b4.54D.name"
			],
			"message": "Only one of 54A, 54B, 54D may be present"
		},
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.55A.bic",
				"b4.55B.name",
				"b4.55D.name"
			],
			"message": "Only one of 55A, 55B, 55D may be present"
		},
		{
			"type": "atMostOneOf",
			"mtKeys": [
				"b4.57A.bic",
				"b4.57B.name",
				"b4.57C.account",
				"b4.57D.name"
			],
			"message": "Only one of 57A, 57B, 57C, 57D may be present"
		},
		/* ===== Conditional rules ===== */
		{
			"type": "conditionalRequired",
			"whenMtKey": "b4.33B.ccy",
			"whenPresent": true,
			"mtKey": "b4.33B.amount",
			"message": "33B amount must be present if 33B currency is given"
		},
		{
			"type": "conditionalRequired",
			"whenMtKey": "b4.71F.ccy",
			"whenPresent": true,
			"mtKey": "b4.71F.amount",
			"message": "71F amount must be present if 71F currency is given"
		},
		/* ===== Numeric comparisons ===== */
		{
			"type": "compare",
			"mtKey": "b4.32A.amount",
			"operator": ">",
			"threshold": "0",
			"message": "32A amount must be greater than zero"
		}
	]
}